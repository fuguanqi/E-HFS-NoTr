clc;clear;
Prob_ID=1;
rng(Prob_ID);

%Number of machines
machine=[3,5,5,4,3,3,2,5];

%Number of orders
for n=[2 3 4 5 10 15 20 40 60 80 100 120]

    %The maximal number of operations of one order
    for n_S=[1 2 4 8]

        % Machine unit energy from Su & Sun, 2018
        e(:,:,1)=[
            1230 1160 1150 9999 9999;
            1380 1040 1270 1170 1000;
            1300 1360 1350 1030 1310;
            1060 1450 1230 1160 9999;
            1150 1380 1040 9999 9999;
            1270 1170 1000 9999 9999;
            1300 1360 9999 9999 9999;
            1350 1030 1310 1060 1450];

        e(:,:,2)=[
            1510 1500 1390 9999 9999;
            1920 1500 1560 1510 1210;
            1770 1960 1850 1480 1860;
            1450 2090 1510 1500 9999;
            1390 1920 1500 9999 9999;
            1560 1510 1210 9999 9999;
            1770 1960 9999 9999 9999;
            1850 1480 1860 1450 2090];

        e(:,:,3)=[
            2270 1820 1880 9999 9999;
            2340 2220 2260 2160 1690;
            2510 2510 2440 1920 2290;
            1960 2970 2270 1820 9999;
            1880 2340 2220 9999 9999;
            2260 2160 1690 9999 9999;
            2510 2510 9999 9999 9999;
            2440 1920 2290 1960 2970];

        % Machine idle energy from Su & Sun, 2018
        a(:,:,1)=[
            230 180 190 9999 9999;
            230 220 230 220 170;
            250 250 240 190 230;
            200 300 230 180 9999;
            190 230 220 9999 9999;
            230 220 170 9999 9999;
            250 250 9999 9999 9999;
            240 190 230 200 300];

        a(:,:,2)=[
            320 280 300 9999 9999;
            330 310 270 300 290;
            320 310 340 280 310;
            300 350 320 280 9999;
            300 330 310 9999 9999;
            270 300 290 9999 9999;
            320 310 9999 9999 9999;
            340 280 310 300 350];

        a(:,:,3)=[
            370 350 350 9999 9999;
            390 380 370 400 350;
            400 380 390 320 390;
            400 400 370 350 9999;
            350 390 380 9999 9999;
            370 400 350 9999 9999;
            400 380 9999 9999 9999;
            390 320 390 400 400];

        % Machine turn on/off energy from Su & Sun, 2018
        b=[
            2600 2530 2560 9999 9999;
            2740 2640 2600 2570 2550;
            2860 2840 2800 2630 2860;
            2760 3050 2600 2530 9999;
            2560 2740 2640 9999 9999;
            2600 2570 2550 9999 9999;
            2860 2840 9999 9999 9999;
            2800 2630 2860 2760 3050];

        %energy to cost
        a=a*0.01;
        b=round(b*0.01,2);
        e=round(e*0.01,2);
        
        for vv=1:3
            a(:,:,vv)=b./round(b./a(:,:,vv));
        end

        %processing time
        p=zeros(n,8,5,3);
        p(:,:,:,3)=randi(84,[n,8,5]);
        p(:,:,:,1)=p(:,:,:,3)*1.5;
        p(:,:,:,2)=p(:,:,:,3)*1.2;
        p=round(p,1);

        %OPA
        OPA=randi(300,[n,n_S]);
        OPA=round(OPA,1);

        %transportation time
        l=randi(200,[7,5,5]);


        % Unit Penalty of earliness & tardiness
        alpha_=randi(10,[n,n_S]);
        beta_=randi(10,[n,n_S]);

        % w_ij
        window_width=randi(50,[n,n_S]);

        % Transportation unit Cost
        e_t=1;
        r=zeros(n,1);
        r(:)=randi(round(max(mean(p,[1,3,4]).*n./machine)),[n,1]);

[status, msg, msgID] = mkdir("problems");
        save (strcat('problems\prob_',num2str(n),'_',num2str(n_S),'.mat'));

    end
end








